{% comment %}
  File: sections/section-premium-brands.liquid
  Name: Premium Brands Grid
  Font consistency with theme typography
{% endcomment %}

<section class="premium-brands-{{ section.id }}" aria-labelledby="premium-brands-heading-{{ section.id }}" style="background: {{ section.settings.background_color }}; font-family: inherit;">
  <div class="pb{{ section.id }}-container"
       style="max-width: {{ section.settings.max_width }}px; margin: 0 auto; padding-top: {{ section.settings.section_padding_top }}px; padding-bottom: {{ section.settings.section_padding_bottom }}px;">

    {%- assign shadow = section.settings.shadow_intensity -%}

    <style>
      /* Center the grid content so capped cards don't hug the left */
      .pb{{ section.id }}-grid{
        display:grid; grid-template-columns:1fr; gap: {{ section.settings.gap_mobile }}px;
        justify-content: center;               /* <-- add */
      }

      /* On small screens, cap card width and center it */
      @media (max-width: 767px){
        .pb{{ section.id }}-card{
          max-width: 520px;                    /* adjust if you want tighter/narrower */
          width: 90%;
          margin-left: auto;
          margin-right: auto;
        }
      }

      /* ==== Scoped styles for Premium Brands {{ section.id }} ==== */
      .premium-brands-{{ section.id }} * { 
        box-sizing: border-box; 
        font-family: inherit; /* Ensure all elements inherit theme fonts */
      }

      .pb{{ section.id }}-header{
        text-align:center; margin:0 auto 28px;
        color: {{ section.settings.body_color | default: 'inherit' }};
        font-family: inherit;
      }
      .pb{{ section.id }}-title{
        color: {{ section.settings.heading_color | default: 'inherit' }};
        font-family: var(--font-heading-family, inherit); /* Use theme's heading font */
        font-weight: 800; line-height:1.15; letter-spacing:.01em;
        margin:0 0 8px; font-size:clamp(28px,3.8vw,42px);
      }
      .pb{{ section.id }}-subtitle{
        max-width:720px; margin:0 auto; font-size:16px; line-height:1.5; opacity:.85;
        font-family: var(--font-body-family, inherit); /* Use theme's body font */
      }
      /* keep it from stretching edge-to-edge on small screens */
      @media (max-width: 767px){
        .pb{{ section.id }}-subtitle{
          max-width: 90%;        /* or 320â€“400px if you want a hard cap */
        }
      }

      .pb{{ section.id }}-grid{
        display:grid; grid-template-columns:1fr; gap: {{ section.settings.gap_mobile }}px;
      }
      @media(min-width:768px){
        .pb{{ section.id }}-grid{ grid-template-columns:repeat(2,1fr); gap: {{ section.settings.gap_desktop | divided_by: 2.0 }}px; }
      }
      @media(min-width:1024px){
        .pb{{ section.id }}-grid{ grid-template-columns:repeat(3,1fr); gap: {{ section.settings.gap_desktop }}px; }
      }

      .pb{{ section.id }}-card{
        background: {{ section.settings.card_background_color }};
        border-radius: {{ section.settings.corner_radius }}px;
        padding: 22px;
        border: 1px solid {{ section.settings.card_border_color }};
        transition: transform .18s ease, box-shadow .18s ease;
        font-family: inherit;
        {% if shadow == 'sm' %} box-shadow: 0 1px 2px rgba(16,24,40,.06); {% endif %}
        {% if shadow == 'md' %} box-shadow: 0 4px 12px rgba(16,24,40,.08); {% endif %}
        {% if shadow == 'lg' %} box-shadow: 0 8px 24px rgba(16,24,40,.10); {% endif %}
      }
      .pb{{ section.id }}-card:focus-within{ outline:2px solid currentColor; outline-offset:2px; }

      .pb{{ section.id }}-cardTitle{
        font-family: var(--font-heading-family, inherit); /* Use theme's heading font */
        font-weight:800; font-size:21px; margin:4px 0 14px;
        color: var(--accent, {{ section.settings.heading_color | default: 'inherit' }});
      }

      /* Row "chips" like the reference (rounded tiles, subtle border, pill on right) */
      .pb{{ section.id }}-rows{ display:flex; flex-direction:column; }
      .pb{{ section.id }}-row{
        display:flex; align-items:center; justify-content:space-between; gap:12px;
        padding: 12px 14px;
        margin-bottom: 12px;
        font-family: var(--font-body-family, inherit); /* Use theme's body font */
        font-size:16px; line-height:1.3;
        background: {{ section.settings.row_bg_color }};
        border: 1px solid {{ section.settings.row_border_color }};
        border-radius: 10px;
        transition: background .15s ease, border-color .15s ease, transform .15s ease;
      }
      .pb{{ section.id }}-row:last-child{ margin-bottom:0; }
      .pb{{ section.id }}-row:hover{ background: {{ section.settings.row_bg_hover_color }}; }
      .pb{{ section.id }}-brand{ 
        font-family: var(--font-body-family, inherit);
      }
      .pb{{ section.id }}-brand a{ 
        color: inherit; text-decoration:none; 
        font-family: inherit;
      }
      .pb{{ section.id }}-brand a:hover, .pb{{ section.id }}-brand a:focus{ text-decoration:underline; }

      .pb{{ section.id }}-pill{
        display:inline-flex; align-items:center; justify-content:center;
        padding: 4px 10px; border-radius:999px; font-size:12px; font-weight:600;
        font-family: var(--font-body-family, inherit); /* Use theme's body font */
        letter-spacing:.04em; text-transform:uppercase; white-space:nowrap;
        background: {{ section.settings.pill_bg_color }}; color: {{ section.settings.pill_text_color }};
        border: 1px solid {{ section.settings.pill_border_color }};
        flex:0 0 auto;
      }

      .pb{{ section.id }}-footnote{
        text-align:center; margin-top:22px; font-size:14px; opacity:.8;
        font-family: var(--font-body-family, inherit); /* Use theme's body font */
      }

      /* Ensure specific elements use appropriate theme fonts */
      .premium-brands-{{ section.id }} h2,
      .premium-brands-{{ section.id }} .pb{{ section.id }}-title,
      .premium-brands-{{ section.id }} .pb{{ section.id }}-cardTitle {
        font-family: var(--font-heading-family, inherit);
      }

      .premium-brands-{{ section.id }} p,
      .premium-brands-{{ section.id }} div,
      .premium-brands-{{ section.id }} span,
      .premium-brands-{{ section.id }} a,
      .premium-brands-{{ section.id }} .pb{{ section.id }}-subtitle,
      .premium-brands-{{ section.id }} .pb{{ section.id }}-row,
      .premium-brands-{{ section.id }} .pb{{ section.id }}-brand,
      .premium-brands-{{ section.id }} .pb{{ section.id }}-pill,
      .premium-brands-{{ section.id }} .pb{{ section.id }}-footnote {
        font-family: var(--font-body-family, inherit);
      }

      @media(prefers-reduced-motion:reduce){
        .pb{{ section.id }}-card, .pb{{ section.id }}-row{ transition:none; }
      }
    </style>

    <header class="pb{{ section.id }}-header">
      <h2 id="premium-brands-heading-{{ section.id }}" class="pb{{ section.id }}-title">
        {{ section.settings.heading | default: 'Premium Brands at Wholesale Prices' }}
      </h2>
      {%- if section.settings.subheading != blank -%}
        <p class="pb{{ section.id }}-subtitle">{{ section.settings.subheading }}</p>
      {%- endif -%}
    </header>

    <div class="pb{{ section.id }}-grid">
      {%- for block in section.blocks -%}
        {%- assign any_brand = false -%}
        {%- for i in (1..12) -%}
          {%- assign label_key = 'brand_' | append: i | append: '_label' -%}
          {%- if block.settings[label_key] != blank -%}{%- assign any_brand = true -%}{%- endif -%}
        {%- endfor -%}
        {%- if any_brand -%}
          <div class="pb{{ section.id }}-card" style="--accent: {{ block.settings.accent_color }};" {{ block.shopify_attributes }}>
            <div class="pb{{ section.id }}-cardTitle">{{ block.settings.title }}</div>
            <div class="pb{{ section.id }}-rows">
              {%- for i in (1..12) -%}
                {%- assign label_key = 'brand_' | append: i | append: '_label' -%}
                {%- assign url_key   = 'brand_' | append: i | append: '_url'   -%}
                {%- assign pill_key  = 'brand_' | append: i | append: '_show_pill' -%}
                {%- assign label = block.settings[label_key] -%}
                {%- if label != blank -%}
                  {%- assign url = block.settings[url_key] -%}
                  {%- assign pill_on = block.settings[pill_key] -%}
                  {%- if pill_on == nil -%}{% assign pill_on = section.settings.show_pill %}{%- endif -%}
                  <div class="pb{{ section.id }}-row">
                    <div class="pb{{ section.id }}-brand">
                      {%- if url != blank -%}<a href="{{ url | escape }}">{{ label }}</a>{%- else -%}{{ label }}{%- endif -%}
                    </div>
                    {%- if pill_on -%}<span class="pb{{ section.id }}-pill">{{ section.settings.pill_text | default: 'WHOLESALE' }}</span>{%- endif -%}
                  </div>
                {%- endif -%}
              {%- endfor -%}
            </div>
            {%- if block.settings.card_note != blank -%}
              <div class="pb{{ section.id }}-footnote">{{ block.settings.card_note }}</div>
            {%- endif -%}
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>

    {%- if section.settings.footer_note != blank -%}
      <div class="pb{{ section.id }}-footnote">{{ section.settings.footer_note }}</div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Premium Brands Grid",
  "tag": "section",
  "class": "section-premium-brands",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Premium Brands at Wholesale Prices" },
    { "type": "textarea", "id": "subheading", "label": "Subheading", "default": "Access the industry's most trusted manufacturers with exclusive pricing available only to approved wholesale partners." },

    { "type": "range", "id": "max_width", "label": "Max width (px)", "min": 900, "max": 1400, "step": 10, "default": 1200 },
    { "type": "range", "id": "section_padding_top", "label": "Padding top (px)", "min": 0, "max": 120, "step": 2, "default": 40 },
    { "type": "range", "id": "section_padding_bottom", "label": "Padding bottom (px)", "min": 0, "max": 120, "step": 2, "default": 40 },

    { "type": "color", "id": "background_color", "label": "Background color", "default": "#F8FAFC" },
    { "type": "color", "id": "card_background_color", "label": "Card background color", "default": "#FFFFFF" },
    { "type": "color", "id": "card_border_color", "label": "Card border color", "default": "#E6EEF5" },

    { "type": "color", "id": "heading_color", "label": "Heading color" },
    { "type": "color", "id": "body_color", "label": "Body text color" },

    { "type": "text", "id": "pill_text", "label": "Pill text", "default": "WHOLESALE" },
    { "type": "checkbox", "id": "show_pill", "label": "Show pill by default", "default": true },
    { "type": "color", "id": "pill_bg_color", "label": "Pill background color", "default": "#E7F6EF" },
    { "type": "color", "id": "pill_text_color", "label": "Pill text color", "default": "#16734E" },
    { "type": "color", "id": "pill_border_color", "label": "Pill border color", "default": "#CFEBDD" },

    { "type": "color", "id": "row_bg_color", "label": "Row chip background", "default": "#F6FAFF" },
    { "type": "color", "id": "row_bg_hover_color", "label": "Row chip hover background", "default": "#F1F7FF" },
    { "type": "color", "id": "row_border_color", "label": "Row chip border", "default": "#EAF2F9" },

    { "type": "range", "id": "corner_radius", "label": "Card corner radius (px)", "min": 0, "max": 24, "step": 1, "default": 12 },
    { "type": "select", "id": "shadow_intensity", "label": "Shadow intensity", "default": "sm",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "sm", "label": "Small" },
        { "value": "md", "label": "Medium" },
        { "value": "lg", "label": "Large" }
      ]
    },
    { "type": "range", "id": "gap_desktop", "label": "Column gap (desktop, px)", "min": 16, "max": 48, "step": 1, "default": 24 },
    { "type": "range", "id": "gap_mobile", "label": "Row gap (mobile, px)", "min": 8, "max": 24, "step": 1, "default": 12 },

    { "type": "textarea", "id": "footer_note", "label": "Footer note (below grid)" }
  ],
  "blocks": [
    {
      "type": "category_card",
      "name": "Category card",
      "settings": [
        { "type": "text", "id": "title", "label": "Category title", "default": "Category" },
        { "type": "color", "id": "accent_color", "label": "Title accent color", "default": "#1D6AE5" },

        { "type": "text", "id": "brand_1_label", "label": "Brand 1 label" },
        { "type": "url",  "id": "brand_1_url",   "label": "Brand 1 link" },
        { "type": "checkbox", "id": "brand_1_show_pill", "label": "Show pill for Brand 1" },

        { "type": "text", "id": "brand_2_label", "label": "Brand 2 label" },
        { "type": "url",  "id": "brand_2_url",   "label": "Brand 2 link" },
        { "type": "checkbox", "id": "brand_2_show_pill", "label": "Show pill for Brand 2" },

        { "type": "text", "id": "brand_3_label", "label": "Brand 3 label" },
        { "type": "url",  "id": "brand_3_url",   "label": "Brand 3 link" },
        { "type": "checkbox", "id": "brand_3_show_pill", "label": "Show pill for Brand 3" },

        { "type": "text", "id": "brand_4_label", "label": "Brand 4 label" },
        { "type": "url",  "id": "brand_4_url",   "label": "Brand 4 link" },
        { "type": "checkbox", "id": "brand_4_show_pill", "label": "Show pill for Brand 4" },

        { "type": "text", "id": "brand_5_label", "label": "Brand 5 label" },
        { "type": "url",  "id": "brand_5_url",   "label": "Brand 5 link" },
        { "type": "checkbox", "id": "brand_5_show_pill", "label": "Show pill for Brand 5" },

        { "type": "text", "id": "brand_6_label", "label": "Brand 6 label" },
        { "type": "url",  "id": "brand_6_url",   "label": "Brand 6 link" },
        { "type": "checkbox", "id": "brand_6_show_pill", "label": "Show pill for Brand 6" },

        { "type": "text", "id": "brand_7_label", "label": "Brand 7 label" },
        { "type": "url",  "id": "brand_7_url",   "label": "Brand 7 link" },
        { "type": "checkbox", "id": "brand_7_show_pill", "label": "Show pill for Brand 7" },

        { "type": "text", "id": "brand_8_label", "label": "Brand 8 label" },
        { "type": "url",  "id": "brand_8_url",   "label": "Brand 8 link" },
        { "type": "checkbox", "id": "brand_8_show_pill", "label": "Show pill for Brand 8" },

        { "type": "text", "id": "brand_9_label", "label": "Brand 9 label" },
        { "type": "url",  "id": "brand_9_url",   "label": "Brand 9 link" },
        { "type": "checkbox", "id": "brand_9_show_pill", "label": "Show pill for Brand 9" },

        { "type": "text", "id": "brand_10_label", "label": "Brand 10 label" },
        { "type": "url",  "id": "brand_10_url",   "label": "Brand 10 link" },
        { "type": "checkbox", "id": "brand_10_show_pill", "label": "Show pill for Brand 10" },

        { "type": "text", "id": "brand_11_label", "label": "Brand 11 label" },
        { "type": "url",  "id": "brand_11_url",   "label": "Brand 11 link" },
        { "type": "checkbox", "id": "brand_11_show_pill", "label": "Show pill for Brand 11" },

        { "type": "text", "id": "brand_12_label", "label": "Brand 12 label" },
        { "type": "url",  "id": "brand_12_url",   "label": "Brand 12 link" },
        { "type": "checkbox", "id": "brand_12_show_pill", "label": "Show pill for Brand 12" },

        { "type": "text", "id": "card_note", "label": "Card footer note (optional)" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Premium Brands Grid",
      "blocks": [
        {
          "type": "category_card",
          "settings": {
            "title": "Water Pumps",
            "accent_color": "#1D6AE5",
            "brand_1_label": "Grundfos",
            "brand_2_label": "Goulds Water Technology",
            "brand_3_label": "Franklin Electric",
            "brand_4_label": "Sta-Rite",
            "brand_5_label": "Myers",
            "brand_6_label": "Berkeley",
            "brand_7_label": "Liberty Pumps",
            "brand_8_label": "Zoeller Pumps",
            "brand_9_label": "Armstrong Pumps",
            "brand_10_label": "Bell & Gossett"
          }
        },
        {
          "type": "category_card",
          "settings": {
            "title": "Sprinklers & Filters",
            "accent_color": "#16A34A",
            "brand_1_label": "Hunter Industries",
            "brand_2_label": "Rain Bird",
            "brand_3_label": "Toro",
            "brand_4_label": "NETAFIM",
            "brand_5_label": "Bermad",
            "brand_6_label": "Irritec",
            "brand_7_label": "Amiad",
            "brand_8_label": "Salco",
            "brand_9_label": "Hydro-Rain"
          }
        },
        {
          "type": "category_card",
          "settings": {
            "title": "PVC & Fittings",
            "accent_color": "#1D6AE5",
            "brand_1_label": "Charlotte Pipe",
            "brand_2_label": "Lesso",
            "brand_3_label": "Spears"
          }
        }
      ]
    }
  ]
}
{% endschema %}